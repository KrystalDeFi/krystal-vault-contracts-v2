// SPDX-License-Identifier: BUSL-1.1
pragma solidity ^0.8.28;

import { console } from "forge-std/console.sol";
import { Test } from "forge-std/Test.sol";
import { AssetLib } from "../../contracts/libraries/AssetLib.sol";
import { ICommon } from "../../contracts/interfaces/ICommon.sol";
import { ILpStrategy } from "../../contracts/interfaces/strategies/ILpStrategy.sol";
import "forge-std/console.sol";

contract Debug is Test {
  function test() public {
    bytes memory data = bytes(
      hex"00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004200000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000037f6d59ac4211000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006921b130d297cc43754afba22e5eac0fbf8db75b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000005e2dc0ead1cfab10608e62d6fdebfeeb4fe3ea4400000000000000000000000003a520b32c04bf3beef7beb72e919cf822ed34f100000000000000000000000000000000000000000000000000000000002e42140000000000000000000000000000000000000000000000000000000000000000"
    );
    AssetLib.Asset[] memory assets = abi.decode(data, (AssetLib.Asset[]));
    for (uint256 i = 0; i < assets.length; i++) {
      console.log(assets[i].token);
      console.log(assets[i].amount);
    }

    bytes memory data2 = bytes(
      hex"00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000097b78a9c77680e3af900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006256d1d220bc0203f00000000000000000000000000000000000000000000032e46ac6d09eaeae14a00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000"
    );
    ICommon.Instruction memory instruction = abi.decode(data2, (ICommon.Instruction));
    console.log(instruction.instructionType);
    ILpStrategy.DecreaseLiquidityAndSwapParams memory params = abi.decode(
      instruction.params,
      (ILpStrategy.DecreaseLiquidityAndSwapParams)
    );
    console.log(params.liquidity);
    console.log(params.amount0Min);
    console.log(params.amount1Min);
    console.log(params.principalAmountOutMin);
    console.logBytes(params.swapData);
  }
}
